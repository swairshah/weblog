<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Swair Shah">
  <title>Unmount Busy Devices - A Blog!</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="../style.css">
  <!-- Warning: Do not edit this file; it will be overwritten during blog rebuild. -->
  <meta name="description" content="Swair's Blog">
  <meta name="keywords" content="Swair Shah, Math, Computers, Chess, Music">
  <link rel="icon" href="/">
  <link href="http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Mono:400,700,400italic" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Droid+Sans+Mono" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700|Alegreya+SC:400,700|PT+Mono" rel="stylesheet" type="text/css">
  
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-42812812-1']);
      _gaq.push(['_trackPageview']);
  
      (function() {
       var ga = document.createElement('script');
       ga.type = 'text/javascript';
       ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0];
       s.parentNode.insertBefore(ga, s);
       })();
  </script>
</head>
<body>
<!-- Warning: Do not edit this file; it will be overwritten during blog rebuild. -->
<h1 class="blog_title">A Blog!</h1>

<a class="return_to_index" href="../index.html">Archives</a>
<h2 class="post_title">Unmount Busy Devices</h2>
<p class="date">July 26, 2013</p>
<!-- begin metadata
title: Unmount Busy Devices
date: 2013-07-26 17:37
end metadata -->

<p>Trying to unmount a removable disk and getting ‘device is busy’? That happens because the device is actually busy! some process is using it.</p>
<p>Solution: Lazily unmount it with <code>-l</code> flag in <code>umount</code>. Lazy unmount removes the filesystem from the fs hierarchy and when the device becomes free, it will clean up all the references.</p>
<pre><code># umount -l /dev/sdb1</code></pre>
<p>To see which processes are using the device,</p>
<pre><code># fuser -m /dev/sdb1
/dev/sdb1:  3717c 4214e</code></pre>
<p>3717 and 4214 are the pid of the process keeping the device busy. What are the processes doing you get to know from the letter following the pid. manpage for fuser lists:</p>
<pre><code>     c      current directory.
     e      executable being run.
     f      open file.  f is omitted in default display mode.
     F      open file for writing.  F is omitted in default display mode.
     r      root directory.
     m      mmap&#39;ed file or shared library.</code></pre>
<p>That gives you an idea. Do,</p>
<p><code>ps -eo pid,command | egrep &quot;3717|4214&quot;</code></p>
<p>to get the processes, kill them if you like with. <code>fuser</code> can also send signals to these processes.</p>
<p><code>fuser -km /dev/sdb1</code></p>
<p>kills the processes using the device.</p>
<!-- Warning!: Do not edit this file; it will be overwritten during blog rebuild. -->
<hr class="footer"/>
<p class="footer">
Copyright &#169; 2012-2014 &ndash; Swair Shah<br>
</p>
</body>
</html>
